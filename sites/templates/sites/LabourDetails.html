{% extends 'Navbar.html' %}

{% block content %}

<body>
    <div class="container">
        <h3>Labour Details</h3>
        <div class="row">
            <div class="col s6">
                <p><strong>Name:</strong> {{ manPK.name }} </p>
                <p><strong>Details:</strong> {{ manPK.contact }} </p>
            </div>
        </div>
        <h4>Add Day-wise Details</h4>
        <form method="post">
            {% csrf_token %}
            <div class="input-field" >
                <input id="manID" name="manpower_id" type="text" class="validate" value="{{ manPK.id }}">
                <label for="manID">man ID</label>
            </div>
            <div class="input-field">
                <input id="date" name="date" type="text" class="datepicker">
                <label for="date">Date</label>
            </div>
            <div class="input-field">
                <select id="present_or_absent" name="present_or_absent">
                    <option value="" disabled selected>Choose an option</option>
                    <option value="Present">Present</option>
                    <option value="Absent">Absent</option>
                </select>
                <label for="present_or_absent">Present or Absent</label>
            </div>
            <div class="input-field">
                <input id="overtime" name="overtime" type="text" value="0" class="validate">
                <label for="overtime">Overtime (hrs)</label>
            </div>
            <div class="input-field">
                <input id="amount_taken" name="amount_taken" type="text" value="0" class="validate">
                <label for="amount_taken">Amount Taken</label>
            </div>
            <div class="input-field">
                <input id="per_day_wages" name="per_day_wages" type="text" value="0" class="validate">
                <label for="per_day_wages">Per Day Wages</label>
            </div>
            <button class="btn waves-effect waves-light" type="submit">Add Details</button>
            <a href=" " class="btn waves-effect waves-light">Go Back</a>
        </form>
        <h4>Day-wise Details</h4>
        <table class="highlight">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Present/Absent</th>
                    <th>Overtime (hrs)</th>
                    <th>Amount Taken</th>
                    <th>Per Day Wages</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                <!-- Add rows for day-wise details -->
                {% for manAttendance in manAttendances %}
                <tr>
                    <td> {{ manAttendance.date }} </td>
                    <td> {{ manAttendance.present_or_absent }} </td>
                    <td> {{ manAttendance.overtime }} </td>
                    <td> {{ manAttendance.amount_taken }} </td>
                    <td> {{ manAttendance.per_day_wages }} </td>
                    <td>
                        <a href="#" class="btn-small waves-effect waves-light">Edit</a>
                        <a href="#" class="btn-small waves-effect waves-light">Delete</a>
                    </td>

                </tr>
                {% endfor %}
            </tbody>
            <tfoot>
                <tr>
                    <td colspan="3"></td>
                    <td><strong>Total Amount:</strong></td>
                    <td id="total_amount"></td>
                    <td></td>
                </tr>
            </tfoot>
        </table>
    </div>
    <!-- Materialize JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var elems = document.querySelectorAll('.datepicker');
            var instances = M.Datepicker.init(elems);
            
        });
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var elems = document.querySelectorAll('select');
            var instances = M.FormSelect.init(elems);
        });
    </script>
</body>

{% endblock %}



